<p-dialog [(visible)]="dialog" [style]="{width: '1200px'}" header="Quiz Details" [modal]="true" styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="formgrid grid">
            <div class="field col">
                <label for="category">Category</label>
                <p-dropdown [options]="caregoryList" [(ngModel)]="category.categoryName" [editable]="true"
                    optionLabel="categoryName"></p-dropdown>
            </div>

            <div class="field col">
                <label for="start">Start</label>
                <p-calendar [(ngModel)]="quiz.quizStart" [showIcon]="true" [showTime]="true" [showButtonBar]="true"
                    appendTo="body"></p-calendar>
            </div>

            <div class="field col">
                <label for="average-test-time">Average test time (min)</label>
                <p-inputNumber [(ngModel)]="quiz.averageTestTime" inputId="average-test-time" mode="decimal" [min]="0"
                    [max]="999"></p-inputNumber>
            </div>
        </div>

        <div class="formgrid grid">
            <div class="field col-6">
                <label for="quiz">Quiz</label>
                <input type="text" pInputText id="quiz" [(ngModel)]="quiz.quizName" />
            </div>

            <div class="field col-1">
                <label for="status">Status</label>
                <div>
                    <p-inputSwitch [(ngModel)]="quiz.quizActive"></p-inputSwitch>
                </div>
            </div>

            <div class="field col">
                <label for="number-of-question">Random test item</label>
                <p-inputNumber [(ngModel)]="quiz.numberOfQuestion" inputId="number-of-question" mode="decimal" [min]="0"
                    [max]="999"></p-inputNumber>
            </div>

            <div class="field col">
                <label for="pass">Pass%</label>
                <p-inputNumber [(ngModel)]="quiz.quizPass" inputId="pass" mode="decimal" [min]="0" [max]="100">
                </p-inputNumber>
            </div>

            <div class="field col">
                <label for="password">Password</label>
                <input type="text" pInputText id="password" [(ngModel)]="quiz.quizPassword" />
            </div>
        </div>

        <div *ngFor="let question of questionList; let i = index">

            <div class="formgrid grid">
                <div class="field col">
                    <label for="question">Question {{i+1}}</label>
                    <input type="text" pInputText id="question" [(ngModel)]="question.questionName" />
                </div>

                <div class="field col-2">
                    <label for="question-time">Test time (sec)</label>
                    <p-inputNumber [(ngModel)]="question.questionTime" inputId="question-time" mode="decimal" [min]="0"
                        [max]="999"></p-inputNumber>
                </div>
            </div>

            <div class="field">
                <label for="type">Multichoice</label>
                <div>
                    <p-inputSwitch [(ngModel)]="question.questionType"></p-inputSwitch>
                </div>
            </div>

            <div class="field-checkbox mt-3" *ngFor="let choice of question.choiceArr; let ic = index">
                <p-checkbox [binary]="true" [(ngModel)]="choice.choiceCorrect.choiceCorrectCheck" inputId="choice"
                    class="mr-2"></p-checkbox>
                <input type="text" pInputText id="question" [(ngModel)]="choice.choiceName" />
                <button pButton pRipple type="button" icon="pi pi-trash"
                    class="ml-2 p-button-rounded p-button-danger p-button-text" (click)="removeChoice(i, ic)"></button>
            </div>
            <div class="btn-right">
                <button [style]="{'width': 'auto'}" pButton pRipple type="button" label="ADD Choice"
                    class="p-button-text" (click)="addChoice(i)"></button>
            </div>


        </div>

        <div class="field">
            <button [style]="{'float': 'right', 'width': 'auto'}" pButton pRipple type="button" label="ADD Question"
                class="p-button-text" (click)="addQuestion()"></button>
        </div>

    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancel" icon="pi pi-seccect" class="p-button-danger"
            (click)="hideDialog()"></button>
        <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-success" (click)="saveItem()"></button>
    </ng-template>
</p-dialog>